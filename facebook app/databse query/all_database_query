drop database facebook_database ; 
create database facebook_database ; 
use facebook_database ; 

CREATE TABLE User
(
user_id varchar(50)  ,
name varchar(200),
birthday date,
PRIMARY KEY (user_id)
); 

CREATE TABLE Place
(
place_id varchar(50),
place_name varchar(200),
PRIMARY KEY (place_id)
);


CREATE TABLE Status
(
user_id varchar(50)  ,
status_id varchar(50) , 
status varchar(2500),
place_id varchar(50),
time_stamp timestamp ,
PRIMARY KEY (status_id),
FOREIGN KEY (user_id) REFERENCES User(user_id),
FOREIGN KEY (place_id) REFERENCES Place(place_id) 
);

CREATE TABLE StatusTag
(
status_id varchar(50) , 
user_id varchar(50) ,
PRIMARY KEY (status_id,user_id),
FOREIGN KEY (status_id) REFERENCES Status(status_id)
);

Create Table StatusLike
(
status_id varchar(50) , 
user_id varchar(50) ,
PRIMARY KEY (status_id,user_id),
FOREIGN KEY (status_id) REFERENCES Status(status_id)
);

Create Table StatusComment
(
status_id varchar(50),
status_comment_id varchar(50),
user_id varchar(50),
comment  varchar(200),
like_count int,
time_stamp timestamp,
PRIMARY KEY (status_comment_id),
FOREIGN KEY (status_id) REFERENCES Status(status_id)
);


CREATE Table TaggedPlace
(
tagged_place_id varchar(50),
user_id varchar(50),
place_id varchar(50),
time_stamp timestamp,
PRIMARY KEY (tagged_place_id),
FOREIGN KEY (user_id) REFERENCES User(user_id),
FOREIGN KEY (place_id) REFERENCES Place(place_id)
);

CREATE Table GroupofPeoples  /*DONT GIVE NAME GROUP BZ OF KEYWORD*/
(
group_id varchar(50),
group_name varchar(50),
PRIMARY KEY (group_id)
);

Create Table GroupUser
(
user_id varchar(50),
group_id varchar(50),
PRIMARY KEY (user_id,group_id),
FOREIGN KEY (user_id) REFERENCES User(user_id),
FOREIGN KEY (group_id) REFERENCES GroupofPeoples(group_id)
);

Create Table Photo
(
user_id varchar(50),
photo_id varchar(50),
photo_caption varchar(2500),
place_id varchar(50),
time_stamp timestamp,
PRIMARY KEY  (photo_id),
FOREIGN KEY (user_id) REFERENCES User(user_id),
FOREIGN KEY (place_id) REFERENCES Place(place_id) 
);

Create Table PhotoTag
(
photo_id varchar(50),
user_id varchar(50),
PRIMARY KEY (photo_id,user_id),
FOREIGN KEY (photo_id) REFERENCES Photo(photo_id)
);
 
Create Table PhotoLike
(
photo_id varchar(50),
user_id varchar(50),
PRIMARY KEY (photo_id,user_id),
FOREIGN KEY (photo_id) REFERENCES Photo(photo_id)
);

Create Table PhotoComment
(
photo_id varchar(50),
comment_id varchar(50),
user_id varchar(50),
comment  varchar(200),
like_count int,
time_stamp timestamp,
PRIMARY KEY (comment_id),
FOREIGN KEY (photo_id) REFERENCES Photo(photo_id)
);

Create Table FriendCount
(
user_id varchar(50)  ,
friendcount int,
FOREIGN KEY (user_id) REFERENCES User(user_id),
PRIMARY KEY (user_id)
);

Create Table FriendConnection
(
user_id varchar(50)  ,
friend_id varchar(50) ,
FOREIGN KEY (user_id) REFERENCES User(user_id),
FOREIGN KEY (friend_id) REFERENCES User(user_id),
PRIMARY KEY (user_id,friend_id)
);

Create Table ProfilePicAndTimeLine
(
user_id varchar(50)  ,
profile_pic_count int,
cover_pic_count int,
FOREIGN KEY (user_id) REFERENCES User(user_id),
PRIMARY KEY (user_id)
);


CREATE TABLE CommunityConnection
(
community_id varchar(5),
user_id varchar(50)  , 
FOREIGN KEY (user_id) REFERENCES User(user_id)
);





CREATE VIEW no_of_likes_per_status AS
select User.user_id,count(StatusLike.user_id) as CountStatusLike 
from User 
LEFT OUTER JOIN Status ON User.user_id = Status.user_id
LEFT OUTER JOIN StatusLike ON Status.status_id = StatusLike.status_id
group by Status.status_id ; 

CREATE VIEW avg_likes_per_status AS 
select user_id,avg(CountStatusLike) as avg_no_of_like_per_status 
from no_of_likes_per_status as UserStatus 
group by UserStatus.user_id;

CREATE VIEW no_of_likes_per_photo AS select User.user_id,count(PhotoLike.user_id) as CountPhotoLike from User 
LEFT OUTER JOIN Photo ON User.user_id = Photo.user_id
LEFT OUTER JOIN PhotoLike ON Photo.photo_id = PhotoLike.photo_id
group by Photo.photo_id ;

CREATE VIEW avg_likes_per_photo AS 
select user_id,avg(CountPhotoLike) as avg_no_of_like_per_photo 
from no_of_likes_per_photo as UserPhoto 
group by UserPhoto.user_id;

CREATE VIEW places_people_went_to AS 
(select user_id,place_id from TaggedPlace ) Union (select user_id,place_id from Photo) Union (select user_id,place_id from Status);

CREATE VIEW no_of_place_people_went_to AS 
select user_id, count(place_id) as no_of_place
from places_people_went_to
group by user_id ; 

/*===========================================================*/

/*Lingustic Features Related Database*/

/*===========================================================*/

CREATE TABLE Linguistic_features
(
status_id varchar(50) ,
WPS double,
UNIQUE_Feature double, /* PLEASE DONT WRITE UNIQUE */
SIXLTR double,
ABBREVIATIONS double,
EMOTICONS double,
QMARKS double,
PERIOD double,
COMMA double,
COLON double,
SEMIC double,
QMARK double,
EXCLAM double,
DASH double,
QUOTE double,
APOSTRO double,
PARENTH double,
OTHERP double,
ALLPCT double,
PRONOUN double,
I double,
WE double,
SELF double,
YOU double,
OTHER double,
NEGATIONS double,
ASSENTS double,
ARTICLES double,
PREPOSITIONS double,
NUMBERS double,
AFFECTIVE_PROCESS double,
POSITIVE_EMOTION double,
POSITIVE_FEELING double,
OPTIMISM double,
NEGATIVE_EMOTION double,
ANXIETY double,
ANGER double,
SADNESS double,
COGNITIVE_PROCESS double,
CAUSATION double,
INSIGHT double,
DISCREPANCY double,
INHIBITION double,
TENTATIVE double,
CERTAINTY double,
SENSORY_PROCESS double,
SEEING double,
HEARING double,
FEELING double,
SOCIAL_PROCESS double,
COMMUNICATION double,
REFERENCE_PEOPLE double,
FRIENDS double,
FAMILY double,
HUMANS double,
TIME double,
PAST double,
PRESENT double,
FUTURE double,
SPACE double,
UP double,
DOWN double,
INCLUSIVE double,
EXCLUSIVE double,
MOTION double,
OCCUPATION double,
SCHOOL double,
JOB_OR_WORK double,
ACHIEVEMENT double,
LEISURE_ACTIVITY double,
HOME double,
SPORTS double,
TV_OR_MOVIE double,
MUSIC double,
MONEY double,
METAPHYSICAL double,
RELIGION double,
DEATH_AND_DYING double,
PHYSICAL_STATES double,
BODY_STATES double,
SEXUALITY double,
EATING double,
SLEEPING double,
GROOMING double,
SWEAR_WORDS double,
NONFLUENCIES double,
FILLERS double,
DIC double,
PRIMARY KEY (status_id),
FOREIGN KEY (status_id) REFERENCES Status(status_id)
); 


/*Status data not not processed that only selected */
/*Write in Java prepared Statement*/
/*
SELECT * 
FROM Status  
WHERE status_id not in (select status_id from Linguistic_features);
*/
/*Insert values to Linguistic_features */
/*
INSERT INTO Linguistic_features
(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);
*/

CREATE VIEW LIWC_feature_extraction_of_user AS
select 
 user_id,
 avg(WPS)as AVG_WPS,
 avg(UNIQUE_Feature)as AVG_UNIQUE_Feature, /* PLEASE DONT WRITE UNIQUE */
 avg(SIXLTR)as AVG_SIXLTR,
 avg(ABBREVIATIONS)as AVG_ABBREVIATIONS ,
 avg(EMOTICONS)as AVG_EMOTICONS ,
 avg(QMARKS )as AVG_QMARKS,
 avg(PERIOD)as AVG_PERIOD ,
 avg(COMMA)as AVG_COMMA ,
 avg(COLON)as AVG_COLON ,
 avg(SEMIC )as AVG_SEMIC,
 avg(QMARK)as AVG_QMARK ,
 avg(EXCLAM )as AVG_EXCLAM,
 avg(DASH )as AVG_DASH,
 avg(QUOTE )as AVG_QUOTE,
 avg(APOSTRO)as AVG_APOSTRO ,
 avg(PARENTH)as AVG_PARENTH,
 avg(OTHERP )as AVG_OTHERP,
 avg(ALLPCT)as AVG_ALLPCT ,
 avg(PRONOUN)as AVG_PRONOUN,
 avg(I )as AVG_I,
 avg(WE )as AVG_WE,
 avg(SELF )as AVG_SELF,
 avg(YOU)as AVG_YOU ,
 avg(OTHER )as AVG_OTHER,
 avg(NEGATIONS)as AVG_NEGATIONS ,
 avg(ASSENTS )as AVG_ASSENTS,
 avg(ARTICLES)as AVG_ARTICLES ,
 avg(PREPOSITIONS)as AVG_PREPOSITIONS ,
 avg(NUMBERS)as AVG_NUMBERS ,
 avg(AFFECTIVE_PROCESS)as AVG_AFFECTIVE_PROCESS ,
 avg(POSITIVE_EMOTION )as AVG_POSITIVE_EMOTION,
 avg(POSITIVE_FEELING)as AVG_POSITIVE_FEELING ,
 avg(OPTIMISM )as AVG_OPTIMISM,
 avg(NEGATIVE_EMOTION)as AVG_NEGATIVE_EMOTION ,
 avg(ANXIETY)as AVG_ANXIETY ,
 avg(ANGER)as AVG_ANGER ,
 avg(SADNESS )as AVG_SADNESS,
 avg(COGNITIVE_PROCESS)as AVG_COGNITIVE_PROCESS ,
 avg(CAUSATION)as AVG_CAUSATION ,
 avg(INSIGHT )as AVG_INSIGHT,
 avg(DISCREPANCY)as AVG_DISCREPANCY,
 avg(INHIBITION)as AVG_INHIBITION ,
 avg(TENTATIVE)as AVG_TENTATIVE ,
 avg(CERTAINTY)as AVG_CERTAINTY ,
 avg(SENSORY_PROCESS)as AVG_SENSORY_PROCESS ,
 avg(SEEING)as AVG_SEEING ,
 avg(HEARING)as AVG_HEARING ,
 avg(FEELING)as AVG_FEELING ,
 avg(SOCIAL_PROCESS)as AVG_SOCIAL_PROCESS ,
 avg(COMMUNICATION)as AVG_COMMUNICATION ,
 avg(REFERENCE_PEOPLE)as AVG_REFERENCE_PEOPLE ,
 avg(FRIENDS)as AVG_FRIENDS ,
 avg(FAMILY)as AVG_FAMILY ,
 avg(HUMANS)as AVG_HUMANS ,
 avg(TIME)as AVG_TIME ,
 avg(PAST)as AVG_PAST ,
 avg(PRESENT)as AVG_PRESENT ,
 avg(FUTURE)as AVG_FUTURE ,
 avg(SPACE)as AVG_SPACE ,
 avg(UP)as AVG_UP ,
 avg(DOWN )as AVG_DOWN,
 avg(INCLUSIVE)as AVG_INCLUSIVE ,
 avg(EXCLUSIVE)as AVG_EXCLUSIVE ,
 avg(MOTION)as AVG_MOTION ,
 avg(OCCUPATION)as AVG_OCCUPATION ,
 avg(SCHOOL)as AVG_SCHOOL ,
 avg(JOB_OR_WORK)as AVG_JOB_OR_WORK ,
 avg(ACHIEVEMENT)as AVG_ACHIEVEMENT ,
 avg(LEISURE_ACTIVITY)as AVG_LEISURE_ACTIVITY ,
 avg(HOME)as AVG_HOME ,
 avg(SPORTS)as AVG_SPORTS ,
 avg(TV_OR_MOVIE)as AVG_TV_OR_MOVIE ,
 avg(MUSIC)as AVG_MUSIC ,
 avg(MONEY)as AVG_MONEY ,
 avg(METAPHYSICAL)as AVG_METAPHYSICAL ,
 avg(RELIGION)as AVG_RELIGION ,
 avg(DEATH_AND_DYING)as AVG_DEATH_AND_DYING ,
 avg(PHYSICAL_STATES)as AVG_PHYSICAL_STATES ,
 avg(BODY_STATES)as AVG_BODY_STATES ,
 avg(SEXUALITY)as AVG_SEXUALITY ,
 avg(EATING)as AVG_EATING ,
 avg(SLEEPING )as AVG_SLEEPING,
 avg(GROOMING)as AVG_GROOMING ,
 avg(SWEAR_WORDS )as AVG_SWEAR_WORDS,
 avg(NONFLUENCIES)as AVG_NONFLUENCIES ,
 avg(FILLERS)as AVG_FILLERS ,
 avg(DIC)as AVG_DIC 
from
    Linguistic_features, Status 
where 
    Linguistic_features.status_id = Status.status_id 
group by 
    user_id; 



CREATE VIEW user_all_features AS
select 
 LIWC_feature_extraction_of_user.user_id as user_id,
 avg_no_of_like_per_photo,
 avg_no_of_like_per_status,
 no_of_place,
 avg_photo_per_week,
 avg_status_per_week,
 AVG_WPS,
 AVG_UNIQUE_Feature, /* PLEASE DONT WRITE UNIQUE */
 AVG_SIXLTR,
 AVG_ABBREVIATIONS ,
 AVG_EMOTICONS ,
 AVG_QMARKS,
 AVG_PERIOD ,
 AVG_COMMA ,
 AVG_COLON ,
 AVG_SEMIC,
 AVG_QMARK ,
 AVG_EXCLAM,
 AVG_DASH,
 AVG_QUOTE,
 AVG_APOSTRO ,
 AVG_PARENTH,
 AVG_OTHERP,
 AVG_ALLPCT ,
 AVG_PRONOUN,
 AVG_I,
 AVG_WE,
 AVG_SELF,
 AVG_YOU ,
 AVG_OTHER,
 AVG_NEGATIONS ,
 AVG_ASSENTS,
 AVG_ARTICLES ,
 AVG_PREPOSITIONS ,
 AVG_NUMBERS ,
 AVG_AFFECTIVE_PROCESS ,
 AVG_POSITIVE_EMOTION,
 AVG_POSITIVE_FEELING ,
 AVG_OPTIMISM,
 AVG_NEGATIVE_EMOTION ,
 AVG_ANXIETY ,
 AVG_ANGER ,
 AVG_SADNESS,
 AVG_COGNITIVE_PROCESS ,
 AVG_CAUSATION ,
 AVG_INSIGHT,
 AVG_DISCREPANCY,
 AVG_INHIBITION ,
 AVG_TENTATIVE ,
 AVG_CERTAINTY ,
 AVG_SENSORY_PROCESS ,
 AVG_SEEING ,
 AVG_HEARING ,
 AVG_FEELING ,
 AVG_SOCIAL_PROCESS ,
 AVG_COMMUNICATION ,
 AVG_REFERENCE_PEOPLE ,
 AVG_FRIENDS ,
 AVG_FAMILY ,
 AVG_HUMANS ,
 AVG_TIME ,
 AVG_PAST ,
 AVG_PRESENT ,
 AVG_FUTURE ,
 AVG_SPACE ,
 AVG_UP ,
 AVG_DOWN,
 AVG_INCLUSIVE ,
 AVG_EXCLUSIVE ,
 AVG_MOTION ,
 AVG_OCCUPATION ,
 AVG_SCHOOL ,
 AVG_JOB_OR_WORK ,
 AVG_ACHIEVEMENT ,
 AVG_LEISURE_ACTIVITY ,
 AVG_HOME ,
 AVG_SPORTS ,
 AVG_TV_OR_MOVIE ,
 AVG_MUSIC ,
 AVG_MONEY ,
 AVG_METAPHYSICAL ,
 AVG_RELIGION ,
 AVG_DEATH_AND_DYING ,
 AVG_PHYSICAL_STATES ,
 AVG_BODY_STATES ,
 AVG_SEXUALITY ,
 AVG_EATING ,
 AVG_SLEEPING,
 AVG_GROOMING ,
 AVG_SWEAR_WORDS,
 AVG_NONFLUENCIES ,
 AVG_FILLERS ,
 AVG_DIC 
from
    LIWC_feature_extraction_of_user, avg_likes_per_photo, avg_likes_per_status, no_of_place_people_went_to, photo_per_week, status_per_week
where 
    LIWC_feature_extraction_of_user.user_id = avg_likes_per_photo.user_id
    and  LIWC_feature_extraction_of_user.user_id = avg_likes_per_status.user_id 
    and  LIWC_feature_extraction_of_user.user_id =  no_of_place_people_went_to.user_id 
    and  LIWC_feature_extraction_of_user.user_id =  photo_per_week.user_id 
    and  LIWC_feature_extraction_of_user.user_id = status_per_week.user_id
    






